/* © 2022 Sitecore Corporation A/S. All rights reserved. Sitecore® is a registered trademark of Sitecore Corporation A/S. 
* 
* Permission to use, copy, modify, and/or distribute this software for any 
* purpose with or without fee is hereby granted, provided that the above 
* copyright notice and this permission notice appear in all copies, unless 
* agreed otherwise. 
* 
* THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH 
* REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY 
* AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, 
* INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM 
* LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE 
* OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR 
* PERFORMANCE OF THIS SOFTWARE. 
* 
*/ 
(()=>{var e={602:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},s=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AvailablePlugins=t.loadPlugins=void 0,t.loadPlugins=function(e){var t,i;return u(this,void 0,void 0,(function(){var o,u,l,f,p,h,d,v,y;return c(this,(function(c){switch(c.label){case 0:o=0,u=Object.keys(r),l={clientKey:e.clientKey,pointOfSale:e.pointOfSale,targetURL:e.targetURL},c.label=1;case 1:c.trys.push([1,8,9,14]),f=s(u),c.label=2;case 2:return[4,f.next()];case 3:return(p=c.sent()).done?[3,7]:(h=p.value,(d=e[h])?[4,Promise.resolve().then((function(){return a(n(895)("./".concat(r[h],".ts")))}))]:[3,6]);case 4:return v=c.sent(),[4,(0,v.default)(d,l)];case 5:c.sent(),o++,c.label=6;case 6:return[3,2];case 7:return[3,14];case 8:return y=c.sent(),t={error:y},[3,14];case 9:return c.trys.push([9,,12,13]),p&&!p.done&&(i=f.return)?[4,i.call(f)]:[3,11];case 10:c.sent(),c.label=11;case 11:return[3,13];case 12:if(t)throw t.error;return[7];case 13:return[7];case 14:return[2,Promise.resolve("".concat(o," plugins loaded"))]}}))}))},function(e){e.webPersonalization="web-personalization"}(r=t.AvailablePlugins||(t.AvailablePlugins={}))},355:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(832);t.default=function(e,t){var n,i;if(!t.pointOfSale)throw new Error('[MV-0003] "pointOfSale" is required.');if(0===t.pointOfSale.trim().length)throw new Error('[MV-0009] "pointOfSale" cannot be empty.');var o={client_key:t.clientKey,pointOfSale:t.pointOfSale,targetURL:t.targetURL,web_flow_config:{async:void 0===e.asyncScriptLoading||e.asyncScriptLoading,defer:null!==(n=e.deferScriptLoading)&&void 0!==n&&n},web_flow_target:null!==(i=e.baseURLOverride)&&void 0!==i?i:"https://d35vb5cccm4xzp.cloudfront.net"};window.Engage.settings=o;var a="".concat(o.web_flow_target,"/web-flow-libs/").concat(o.client_key,"/web-version.min.js");(0,r.appendScriptWithAttributes)({async:o.web_flow_config.async,src:a})}},993:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var a=n(975),u=n(739),c=n(744),s=n(181),l=n(184),f=n(881),p=n(791),h=n(602),d=n(945),v=n(26),y=n(996),b=n(128),g=n(968);t.init=function(e){return i(this,void 0,Promise,(function(){var t,n,i,w,m,_;return o(this,(function(o){switch(o.label){case 0:if("undefined"==typeof window)throw new Error('[IE-0001] The "window" object is not available on the server side. Use the "window" object only on the client side, and in the correct execution context.');return(t=(0,f.createSettings)(e)).cookieSettings.forceServerCookieMode||(0,l.replaceObsoleteCookieNamePrefixes)(t.cookieSettings),t.cookieSettings.forceServerCookieMode||(0,s.cookieExists)(window.document.cookie,t.cookieSettings.cookieName)?[3,2]:[4,(0,l.createCookie)(t.targetURL,t.clientKey,t.cookieSettings)];case 1:o.sent(),o.label=2;case 2:return n=(0,d.getBrowserId)(t.cookieSettings.cookieName),i=new p.EventApiClient(t.targetURL,g.API_VERSION),window.Engage={},[4,(0,h.loadPlugins)(e)];case 3:return o.sent(),window.Engage=r(r({},window.Engage),{getBrowserId:function(){return(0,d.getBrowserId)(t.cookieSettings.cookieName)},version:g.LIBRARY_VERSION}),w=new v.Infer,m=new b.EventQueue(sessionStorage,i,w),_=new c.CallFlowCDPClient(t),[2,{addToEventQueue:function(e,r,i){var o={eventData:r,extensionData:i,id:n,settings:t,type:e};m.enqueueEvent(o)},clearEventQueue:function(){m.clearQueue()},event:function(e,r,o){return new a.CustomEvent({eventApiClient:i,eventData:r,extensionData:o,id:n,infer:w,settings:t,type:e}).send()},form:function(e,r,o){var u={language:function(){},pageName:function(){}};return new a.CustomEvent({eventApiClient:i,eventData:{pointOfSale:o},extensionData:{formId:e,interactionType:r.toUpperCase()},id:n,infer:u,settings:t,type:"FORM"}).send()},getBrowserId:function(){return(0,d.getBrowserId)(t.cookieSettings.cookieName)},getGuestId:function(){return(0,y.getGuestId)(n,t.targetURL,t.clientKey)},identity:function(e,r){return new a.IdentityEvent({eventApiClient:i,eventData:e,extensionData:r,id:n,infer:w,settings:t}).send()},pageView:function(e,r){return new a.PageViewEvent({eventApiClient:i,eventData:e,extensionData:r,id:n,infer:w,searchParams:window.location.search,settings:t}).send()},personalize:function(e,t){return new u.Personalizer(_,n,w).getInteractiveExperienceData(e,t)},processEventQueue:function(){return m.sendAllEvents()},updatePointOfSale:function(e){return(0,f.updatePointOfSale)(e,t)},version:g.LIBRARY_VERSION}]}}))}))}},832:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendScriptWithAttributes=void 0,t.appendScriptWithAttributes=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e.src,t.async=e.async,document.head.appendChild(t)}},791:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventApiClient=void 0;var o=n(968),a=function(){function e(e,t){this.targetURL=e,this.apiVersion=t,this.eventUrl="".concat(this.targetURL,"/").concat(this.apiVersion,"/").concat(o.EndPoint.Events)}return e.prototype.send=function(e){return r(this,void 0,Promise,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return t={body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-Library-Version":o.LIBRARY_VERSION},method:"POST"},[4,fetch(this.eventUrl,t).then((function(e){return e.json()})).then((function(e){return e})).catch((function(){return null}))];case 1:return[2,n.sent()]}}))}))},e}();t.EventApiClient=a},184:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceObsoleteCookieNamePrefixes=t.createCookie=t.getCookieValue=void 0;var o=n(968),a=n(181),u=n(920);t.getCookieValue=function(e){var t,n=(0,a.getCookie)(document.cookie,e);return null!==(t=null==n?void 0:n.value)&&void 0!==t?t:""},t.createCookie=function(e,t,n){return r(this,void 0,Promise,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return[4,(0,u.getBrowserIdFromCdp)(e,t)];case 1:return r=i.sent(),o=(0,a.getDefaultCookieAttributes)(n.cookieExpiryDays,n.cookieDomain),document.cookie=(0,a.createCookieString)(n.cookieName,r,o),[2,r]}}))}))},t.replaceObsoleteCookieNamePrefixes=function(e){(0,a.filterCookiesByPrefix)(document.cookie,"BID_").forEach((function(t){(0,a.deleteCookie)(t.name);var n={name:t.name.replace("BID_",o.BID_PREFIX),value:t.value},r=(0,a.getDefaultCookieAttributes)(e.cookieExpiryDays,e.cookieDomain);document.cookie=(0,a.createCookieString)(n.name,n.value,r)}))}},945:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserId=void 0;var r=n(184);t.getBrowserId=function(e){return(0,r.getCookieValue)(e)}},128:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventQueue=void 0;var a=n(975),u=function(){function e(e,t,n){this.storage=e,this.eventApiClient=t,this.infer=n,this.key="EngageEventQueue"}return e.prototype.getEventQueue=function(){var e=this.storage.getItem(this.key);if(!e)return[];try{var t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(n){return[]}},e.prototype.enqueueEvent=function(e){var t,n;e.eventData.page=null!==(t=e.eventData.page)&&void 0!==t?t:this.infer.pageName(),e.eventData.language=null!==(n=e.eventData.language)&&void 0!==n?n:this.infer.language(),new a.CustomEvent(r({eventApiClient:this.eventApiClient,infer:this.infer},e));var i=this.getEventQueue();i.push(e),this.storage.setItem(this.key,JSON.stringify(i))},e.prototype.sendAllEvents=function(){return i(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(i){switch(i.label){case 0:e=this.getEventQueue(),t=0,n=e,i.label=1;case 1:return t<n.length?(r=n[t],[4,new a.CustomEvent({eventApiClient:this.eventApiClient,eventData:r.eventData,extensionData:r.extensionData,id:r.id,infer:this.infer,settings:r.settings,type:r.type}).send()]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return this.clearQueue(),[2]}}))}))},e.prototype.clearQueue=function(){this.storage.removeItem(this.key)},e}();t.EventQueue=u},79:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEvent=void 0;var r=n(352),i=function(){function e(e,t,n,i){var o,a,u;this.baseEventData=e,this.settings=t,this.infer=i,this.pointOfSale=(0,r.getPointOfSale)(this.baseEventData.pointOfSale||t.pointOfSale),this.browserId=n,this.language=null!==(o=this.baseEventData.language)&&void 0!==o?o:null===(a=this.infer)||void 0===a?void 0:a.language(),this.page=null!==(u=this.baseEventData.page)&&void 0!==u?u:this.infer?this.infer.pageName():""}return e.prototype.mapBaseEventPayload=function(){return{browser_id:this.browserId,channel:this.baseEventData.channel,client_key:this.settings.clientKey,currency:this.baseEventData.currency,language:this.language,page:this.page,pos:this.pointOfSale}},e}();t.BaseEvent=i},153:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomEvent=void 0;var s=n(614),l=n(79),f=n(968),p=function(e){function t(t){var n=this,r=t.eventData,i=r.channel,a=r.currency,u=r.pointOfSale,l=r.language,p=r.page,h=c(r,["channel","currency","pointOfSale","language","page"]);(n=e.call(this,{channel:i,currency:a,language:l,page:p,pointOfSale:u},t.settings,t.id,t.infer)||this).extensionData={},n.eventApiClient=t.eventApiClient,n.customEventPayload=o({type:t.type},h),t.extensionData&&(n.extensionData=(0,s.flattenObject)({object:t.extensionData}));var d=Object.entries(n.extensionData).length;if(d>f.MAX_EXT_ATTRIBUTES)throw new Error("[IV-0005] This event supports maximum ".concat(f.MAX_EXT_ATTRIBUTES," attributes. Reduce the number of attributes."));return d>0&&(n.customEventPayload.ext=n.extensionData),n}return i(t,e),t.prototype.send=function(){return a(this,void 0,Promise,(function(){var e,t;return u(this,(function(n){switch(n.label){case 0:return e=this.mapBaseEventPayload(),t=Object.assign({},this.customEventPayload,e),[4,this.eventApiClient.send(t)];case 1:return[2,n.sent()]}}))}))},t}(l.BaseEvent);t.CustomEvent=p},182:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityEvent=void 0;var u=n(968),c=n(795),s=n(11),l=n(79),f=n(614),p=function(e){function t(t){var n=this,r=t.eventData,i=r.channel,o=r.currency,a=r.pointOfSale,c=r.language,s=r.page;if((n=e.call(this,{channel:i,currency:o,language:c,page:s,pointOfSale:a},t.settings,t.id,t.infer)||this).extensionData={},n.numberOfExtensionDataProperties=0,n.validateAttributes(t.eventData),n.eventData=t.eventData,n.eventApiClient=t.eventApiClient,t.extensionData&&(n.extensionData=(0,f.flattenObject)({object:t.extensionData})),n.numberOfExtensionDataProperties=Object.entries(n.extensionData).length,n.numberOfExtensionDataProperties>u.MAX_EXT_ATTRIBUTES)throw new Error("[IV-0005] This event supports maximum ".concat(u.MAX_EXT_ATTRIBUTES," attributes. Reduce the number of attributes."));return n}return i(t,e),t.prototype.validateAttributes=function(e){if(0===e.identifiers.length)throw new Error('[MV-0004] "identifiers" is required.');if(void 0!==e.dob&&!(0,c.isShortISODateString)(e.dob))throw new Error('[IV-0002] Incorrect value for "dob". Format the value according to ISO 8601.');if(e.identifiers.forEach((function(e){if(e.expiryDate&&!(0,c.isShortISODateString)(e.expiryDate))throw new Error('[IV-0004] Incorrect value for "expiryDate". Format the value according to ISO 8601.')})),e.email&&!(0,s.isValidEmail)(e.email))throw new Error('[IV-0003] Incorrect value for "email". Set the value to a valid email address.')},t.prototype.mapAttributes=function(){var e={city:this.eventData.city,country:this.eventData.country,dob:this.eventData.dob,email:this.eventData.email,firstname:this.eventData.firstName,gender:this.eventData.gender,identifiers:this.eventData.identifiers.map((function(e){return{expiry_date:e.expiryDate,id:e.id,provider:e.provider}})),lastname:this.eventData.lastName,mobile:this.eventData.mobile,phone:this.eventData.phone,postal_code:this.eventData.postalCode,state:this.eventData.state,street:this.eventData.street,title:this.eventData.title,type:u.EventTypes.Identity};return this.numberOfExtensionDataProperties>0&&(e.ext=this.extensionData),e},t.prototype.send=function(){return o(this,void 0,Promise,(function(){var e,t,n;return a(this,(function(r){switch(r.label){case 0:return e=this.mapBaseEventPayload(),t=this.mapAttributes(),n=Object.assign({},t,e),[4,this.eventApiClient.send(n)];case 1:return[2,r.sent()]}}))}))},t}(l.BaseEvent);t.IdentityEvent=p},975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityEvent=t.CustomEvent=t.PageViewEvent=t.BaseEvent=void 0;var r=n(79);Object.defineProperty(t,"BaseEvent",{enumerable:!0,get:function(){return r.BaseEvent}});var i=n(966);Object.defineProperty(t,"PageViewEvent",{enumerable:!0,get:function(){return i.PageViewEvent}});var o=n(153);Object.defineProperty(t,"CustomEvent",{enumerable:!0,get:function(){return o.CustomEvent}});var a=n(182);Object.defineProperty(t,"IdentityEvent",{enumerable:!0,get:function(){return a.IdentityEvent}})},966:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PageViewEvent=void 0;var c=n(968),s=n(79),l=n(614),f=function(e){function t(t){var n=this,r=t.eventData,i=r.channel,o=r.currency,a=r.pointOfSale,u=r.language,s=r.page;if((n=e.call(this,{channel:i,currency:o,language:u,page:s,pointOfSale:a},t.settings,t.id,t.infer)||this).extensionData={},n.eventData=t.eventData,n.urlSearchParams=new URLSearchParams(decodeURI(t.searchParams)),t.extensionData&&(n.extensionData=(0,l.flattenObject)({object:t.extensionData})),Object.entries(n.extensionData).length>c.MAX_EXT_ATTRIBUTES)throw new Error("[IV-0005] This event supports maximum ".concat(c.MAX_EXT_ATTRIBUTES," attributes. Reduce the number of attributes."));return n.eventApiClient=t.eventApiClient,n}return i(t,e),t.prototype.getUTMParameters=function(){var e={};return this.urlSearchParams.forEach((function(t,n){var r=n.toLowerCase();0===r.indexOf(c.UTM_PREFIX)&&(e[r]=t)})),e},t.prototype.getPageVariantId=function(e,t){if(e)return e;var n=this.urlSearchParams.get("variantid");return n||(t||null)},t.prototype.getReferrer=function(){if(this.eventData.referrer)return this.eventData.referrer;if("undefined"==typeof window)return null;if(!t.isFirstPageView||!document.referrer)return null;var e=new URL(document.referrer),n=e.hostname,r=e.href;return window.location.hostname!==n?r:null},t.prototype.mapAttributes=function(){var e={type:c.EventTypes.View};if(this.settings.includeUTMParameters){var t=this.getUTMParameters();e=o(o({},e),t)}var n=this.getPageVariantId(this.eventData.pageVariantId,this.extensionData.pageVariantId);null!==n&&(e.ext=o(o({},e.ext),{pageVariantId:n})),Object.keys(this.extensionData).length>0&&(delete this.extensionData.pageVariantId,e.ext=o(o({},e.ext),this.extensionData));var r=this.getReferrer();return null!==r&&(e=o(o({},e),{referrer:r})),e},t.prototype.send=function(){return a(this,void 0,Promise,(function(){var e,n,r;return u(this,(function(i){switch(i.label){case 0:return e=this.mapBaseEventPayload(),n=this.mapAttributes(),r=Object.assign({},n,e),t.isFirstPageView=!1,[4,this.eventApiClient.send(r)];case 1:return[2,i.sent()]}}))}))},t.isFirstPageView=!0,t}(s.BaseEvent);t.PageViewEvent=f},26:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Infer=void 0;var n=function(){function e(){}return e.prototype.language=function(){return window.document.documentElement.lang.length>1?new Intl.Locale(window.document.documentElement.lang).language.toLocaleUpperCase():void 0},e.prototype.pageName=function(){return"/"===window.location.pathname?"Home Page":window.location.pathname.split("/").pop()},e}();t.Infer=n},744:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CallFlowCDPClient=void 0;var o=n(206),a=n(295),u=n(968),c=function(){function e(e){this.settings=e}return e.prototype.sendCallFlowsRequest=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){return n=(0,o.generateCallFlowUrl)(this.settings.targetURL),r={body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-Library-Version":u.LIBRARY_VERSION},method:"POST"},void 0===t?[2,fetch(n,r).then((function(e){return e.json()})).then((function(e){return e})).catch((function(){return null}))]:[2,(0,a.fetchWithTimeout)(n,t,r)]}))}))},e}();t.CallFlowCDPClient=c},739:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Personalizer=void 0;var o=n(614),a=n(352),u=function(){function e(e,t,n){this.personalizeClient=e,this.id=t,this.infer=n}return e.prototype.getInteractiveExperienceData=function(e,t){return r(this,void 0,Promise,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return this.validate(e),n=this.sanitizeInput(e),(r=this.mapPersonalizeInputToCDPData(n)).email||r.identifiers||(r.browserId=this.id),[4,this.personalizeClient.sendCallFlowsRequest(r,t)];case 1:return[2,i.sent()]}}))}))},e.prototype.sanitizeInput=function(e){var t={channel:e.channel,currency:e.currency,friendlyId:e.friendlyId,language:e.language,pointOfSale:(0,a.getPointOfSale)(e.pointOfSale||this.personalizeClient.settings.pointOfSale)};return e.identifier&&e.identifier.id&&e.identifier.id.trim().length>0&&(t.identifier=e.identifier),e.email&&e.email.trim().length>0&&(t.email=e.email),e.params&&Object.keys(e.params).length>0&&(t.params=(0,o.flattenObject)({object:e.params})),t},e.prototype.mapPersonalizeInputToCDPData=function(e){var t,n;return{channel:e.channel,clientKey:this.personalizeClient.settings.clientKey,currencyCode:e.currency,email:e.email,friendlyId:e.friendlyId,identifiers:e.identifier,language:null!==(t=e.language)&&void 0!==t?t:null===(n=this.infer)||void 0===n?void 0:n.language(),params:e.params,pointOfSale:e.pointOfSale}},e.prototype.validate=function(e){var t=e.friendlyId;if(!t||0===t.trim().length)throw new Error('[MV-0008] "friendlyId" is required.')},e}();t.Personalizer=u},881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePointOfSale=t.validateSettings=t.createSettings=void 0;var r=n(968);function i(e){var t=e.clientKey,n=e.targetURL,r=e.pointOfSale;if(!t)throw new Error('[MV-0001] "clientKey" is required.');if(!n)throw new Error('[MV-0002] "targetURL" is required.');if(r&&0===r.trim().length)throw new Error('[MV-0009] "pointOfSale" cannot be empty.');try{new URL(n)}catch(i){throw new Error('[IV-0001] Incorrect value for "targetURL". Set the value to a valid URL string.')}}t.createSettings=function(e){i(e);var t=e.clientKey,n=e.targetURL,o=e.cookieDomain,a=e.cookiePath,u=e.cookieExpiryDays,c=e.forceServerCookieMode,s=e.includeUTMParameters,l=e.pointOfSale;return{clientKey:t,cookieSettings:{cookieDomain:o,cookieExpiryDays:u||r.DEFAULT_COOKIE_EXPIRY_DAYS,cookieName:"".concat(r.BID_PREFIX).concat(t),cookiePath:a||"/",forceServerCookieMode:null!=c&&c},includeUTMParameters:null==s||s,pointOfSale:null!=l?l:void 0,targetURL:n}},t.validateSettings=i,t.updatePointOfSale=function(e,t){if(!(e&&e.trim().length>0))throw new Error('[MV-0009] "pointOfSale" cannot be empty.');window&&window.Engage&&window.Engage.settings&&(window.Engage.settings.pointOfSale=e),t.pointOfSale=e}},968:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventTypes=t.EndPoint=t.MAX_EXT_ATTRIBUTES=t.BID_PREFIX=t.UTM_PREFIX=t.CALLFLOW_API_VERSION=t.API_VERSION=t.DAILY_SECONDS=t.DEFAULT_COOKIE_EXPIRY_DAYS=t.LIBRARY_VERSION=void 0;var i=r(n(147));t.LIBRARY_VERSION=i.default.version,t.DEFAULT_COOKIE_EXPIRY_DAYS=730,t.DAILY_SECONDS=86400,t.API_VERSION="v1.2",t.CALLFLOW_API_VERSION="v2",t.UTM_PREFIX="utm_",t.BID_PREFIX="bid_",t.MAX_EXT_ATTRIBUTES=50,function(e){e.Events="events",e.Browser="browser",e.Batches="batches",e.CallFlows="callFlows"}(t.EndPoint||(t.EndPoint={})),function(e){e.Add="ADD",e.AddConsumers="ADD_CONSUMERS",e.AddContacts="ADD_CONTACTS",e.AddProduct="ADD_PRODUCT",e.Calculator="CALCULATOR",e.CampaignTracking="CAMPAIGN_TRACKING",e.ClearCart="CLEAR_CART",e.Click="CLICK",e.Chat="CHAT",e.Checkout="CHECKOUT",e.Comment="COMMENT",e.Confirm="CONFIRM",e.ContactRequest="CONTACT_REQUEST",e.Consumers="CONSUMERS",e.Email="EMAIL",e.Login="LOGIN",e.Identity="IDENTITY",e.Notification="NOTIFICATION",e.OrderUpdate="ORDER_UPDATE",e.Payment="PAYMENT",e.Purchase="PURCHASE",e.PnrRecord="PNR_RECORD",e.Sms="SMS",e.Subscription="SUBSCRIPTION",e.Search="SEARCH",e.Select="SELECT",e.Trigger="TRIGGER",e.TripSummary="TRIP_SUMMARY",e.Update="UPDATE",e.View="VIEW"}(t.EventTypes||(t.EventTypes={}))},181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCookie=t.filterCookiesByPrefix=t.getDefaultCookieAttributes=t.createCookieString=t.cookieExists=t.getCookie=void 0;var r=n(968),i=n(936);t.getCookie=function(e,t){if(e){var n=e.split("; ").find((function(e){return e.indexOf("=")>0&&e.split("=")[0]===t}));return void 0!==n?{name:n.split("=")[0],value:n.split("=")[1]}:void 0}},t.cookieExists=function(e,t){return e.split("; ").some((function(e){return e.split("=")[0]===t}))},t.createCookieString=function(e,t,n){var r="".concat(e,"=").concat(t,";");return r+=" Max-Age=".concat(n.maxAge,"; SameSite=").concat(n.sameSite,";"),r+=n.secure?" Secure;":"",r+=n.path?" Path=".concat(n.path,";"):"",r=(r+=n.domain?" Domain=".concat(n.domain,";"):"").substring(0,r.length-1)},t.getDefaultCookieAttributes=function(e,t){return void 0===e&&(e=r.DEFAULT_COOKIE_EXPIRY_DAYS),{domain:t,maxAge:e*r.DAILY_SECONDS,path:"/",sameSite:i.SameSiteProperties.None,secure:!0}},t.filterCookiesByPrefix=function(e,t){return e.split("; ").filter((function(e){return e.split("=")[0].startsWith(t)})).map((function(e){return{name:e.split("=")[0],value:e.split("=")[1]}}))},t.deleteCookie=function(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},795:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isISODateString=t.isShortISODateString=void 0,t.isShortISODateString=function(e){try{return new Date(e+"Z").toISOString().substring(0,16)===e}catch(t){return!1}},t.isISODateString=function(e){try{return new Date(e).toISOString()===e}catch(t){return!1}}},11:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidEmail=void 0,t.isValidEmail=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}},295:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithTimeout=void 0,t.fetchWithTimeout=function(e,t,o){return r(this,void 0,Promise,(function(){var r,a,u;return i(this,(function(i){if(!Number.isInteger(t)||t<0)throw new Error("[IV-0006] Incorrect value for the timeout parameter. Set the value to an integer greater than or equal to 0.");return r=new AbortController,a=r.signal,u=setTimeout((function(){r.abort()}),t),[2,fetch(e,n(n({},o),{signal:a})).then((function(e){return clearTimeout(u),e.json()})).then((function(e){return e})).catch((function(e){if("AbortError"===e.name)throw new Error("[IE-0003] Timeout exceeded. The server did not respond within the allotted time.");return null}))]}))}))}},614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenObject=void 0,t.flattenObject=function e(t){var n,r=t.currentKey,i=t.object,o=null!==(n=t.newObject)&&void 0!==n?n:{};for(var a in i){var u=i[a];void 0!==u&&("object"!=typeof u||Array.isArray(u)?o[r?"".concat(r,"_").concat(a):a]=u:e({currentKey:"".concat(r?"".concat(r,"_").concat(a):a),newObject:o,object:u}))}return o}},920:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserIdFromCdp=void 0;var o=n(968),a=n(295),u=n(206);t.getBrowserIdFromCdp=function(e,t,n){return r(this,void 0,Promise,(function(){var r,c;return i(this,(function(i){switch(i.label){case 0:return r={headers:{"X-Library-Version":o.LIBRARY_VERSION}},void 0===n?[3,2]:[4,(0,a.fetchWithTimeout)((0,u.generateCreateBrowserIdUrl)(e,t),n,r)];case 1:return c=i.sent(),[3,4];case 2:return[4,fetch((0,u.generateCreateBrowserIdUrl)(e,t),r).then((function(e){return e.json()})).then((function(e){return e})).catch((function(){}))];case 3:c=i.sent(),i.label=4;case 4:return c?[2,c.ref]:[2,""]}}))}))}},996:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGuestId=void 0;var o=n(968);t.getGuestId=function(e,t,n){return r(this,void 0,Promise,(function(){var r,a,u,c,s,l;return i(this,(function(i){switch(i.label){case 0:return r="".concat(t,"/").concat(o.API_VERSION,"/browser/").concat(e,"/show.json?client_key=").concat(n,"&api_token=").concat(n),[4,fetch(r,{headers:{"X-Library-Version":o.LIBRARY_VERSION}})];case 1:return[4,(a=i.sent()).json()];case 2:if(u=i.sent(),!a.ok)throw s=(c=u).error_msg,l=c.moreInfo,new Error("".concat(s,", for more info: ").concat(l));return[2,u.customer.ref]}}))}))}},352:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPointOfSale=void 0,t.getPointOfSale=function(e){if(e&&e.trim().length>0)return e;throw Error('[MV-0003] "pointOfSale" is required.')}},936:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SameSiteProperties=void 0,function(e){e.Strict="Strict",e.Lax="Lax",e.None="None"}(t.SameSiteProperties||(t.SameSiteProperties={}))},206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCallFlowUrl=t.generateCreateBrowserIdUrl=void 0;var r=n(968);t.generateCreateBrowserIdUrl=function(e,t){return"".concat(e,"/").concat(r.API_VERSION,"/").concat(r.EndPoint.Browser,"/create.json?client_key=").concat(t,"&message={}")},t.generateCallFlowUrl=function(e){return"".concat(e,"/").concat(r.CALLFLOW_API_VERSION,"/").concat(r.EndPoint.CallFlows)}},895:(e,t,n)=>{var r={"./web-personalization.ts":355};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=895},147:e=>{"use strict";e.exports=JSON.parse('{"name":"@sitecore/engage","version":"1.4.2","license":"Apache-2.0","module":"./esm/src/index.mjs","main":"./cjs/src/index.cjs","types":"./types/index.d.ts","exports":{".":{"types":"./types/index.d.ts","import":"./esm/src/index.mjs","require":"./cjs/src/index.cjs"}}}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var t=n(993);Object.defineProperty(e,"init",{enumerable:!0,get:function(){return t.init}})})(),window.Engage=r})();